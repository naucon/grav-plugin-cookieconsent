var ready = false;
document.onreadystatechange = function () {
  if (ready) {
    return;
  }
  if (document.readyState === 'interactive' || document.readyState === 'complete') {
    ready = true;
    {% if custom_document_event %}
    document.addEventListener('{{ custom_document_event }}', function () {
    {% endif %}
      window.cookieconsent.initialise({
        'palette': {
          'popup': {
            'background': '{{ popup_background_color }}',
            'text': '{{ popup_text_color }}'
          },
          'button': {
            'background': '{{ button_background_color }}',
            'text': '{{ button_text_color }}',
            'border': '{{ button_border_color }}'
          },
        },
        {% if position == 'top-pushdown' %}
        'position': 'top',
        'static': true,
        {% else %}
        'position': '{{ position }}',
        {% endif %}
        'theme': '{{ theme }}',
        'content': {
          'message': '{{ "PLUGINS.COOKIECONSENT.CONTENT_MESSAGE"|t }}',
          'dismiss': '{{ "PLUGINS.COOKIECONSENT.CONTENT_DISMISS"|t }}',
          'link': '{{ "PLUGINS.COOKIECONSENT.CONTENT_LINK"|t }}',
          'href': '{{ "PLUGINS.COOKIECONSENT.CONTENT_HREF"|t }}'
        }
      });
    {% if custom_document_event %}
    });
    {% endif %}
  }
};
